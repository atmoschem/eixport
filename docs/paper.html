<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Summary • eixport</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css"><script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet"><script src="pkgdown.js"></script><meta property="og:title" content="Summary"><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-2642843-6"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-2642843-6');
</script></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-title-body">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">eixport</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.6.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/atmoschem/eixport/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
    <div class="page-header">
      <h1>Summary</h1>
    </div>


<div id="summary" class="section level1">

<p>Emissions are the pollutant mass released into the atmosphere [@pulles2010art]. The origin of the emissions can be human-made or anthropogenic or biogenic. The consequences of this pollution are complex affecting the atmosphere, human health, ecosystems, and infrastructure [@SeinfeldPandis2016]. In fact, pollution caused 9 million premature deaths in 2015, 16% of all deaths worldwide [@landrigan2017lancet].</p>
<p>An important tool for policy decision is air quality models. They have been used not only to study the impact of different emissions scenarios for policy making but also to understand the dynamics of air pollutants in various parts of the world [@Andradeetal2015]. The inputs for an air quality models are meteorology and emissions. Currently, there are tools for developing emissions inventories such as the VEIN [@vein] and the EmissV models [@emissv]. However, the existing tools for inputting the emissions into the air quality models are not written in a user-friendly way, such as PREP-Chem written in Fortran and C [@freitas2011prep]. Also, as the R language has a growing community, including statistical R packages for model evaluation and validation, such as openair [], air quality modelers already familiar with R would tend to use ‘eixport’ for inputing data into the appropiate format for each model without the need of deep knowledge in a specific model language. Therefore, we developed <strong>eixport</strong>, a tool for inputting data into atmospheric models using R [@R].</p>
<p>eixport imports functions form the R packages sf [@sf] which provides functions for spatial vector data, providing bindings to the GDAL, GEOS, and Proj.4 C++ libraries. Also, eixport import functions from the package ncdf4 [@ncdf4], which interface to Unidata netCDF Format Data Files, and from the raster package [@raster], which provides functions to gridded data.</p>
<div class="section level2">
<h2 id="functions-and-data">Functions and data<a class="anchor" aria-label="anchor" href="#functions-and-data"></a></h2>
<p>eixport count with the following functions:</p>
<table class="table"><colgroup><col width="18%"><col width="81%"></colgroup><thead><tr class="header"><th>Function</th>
<th>Description</th>
</tr></thead><tbody><tr class="odd"><td>emisco</td>
<td>Dataset of Emissions from VEIN demo</td>
</tr><tr class="even"><td>emis_opt</td>
<td>List of WRF emission species</td>
</tr><tr class="odd"><td>rawprofile</td>
<td>A matrix to temporally distribute emissions</td>
</tr><tr class="even"><td>wrf_create</td>
<td>Create WRF-Chem inputs based on a WRFinput file</td>
</tr><tr class="odd"><td>wrf_get</td>
<td>Reads variables from WRF-Chem inputs</td>
</tr><tr class="even"><td>wrf_grid</td>
<td>Creates spatial feature (sf) polygon grid from WRFinput file</td>
</tr><tr class="odd"><td>wrf_plot</td>
<td>Simple plot from wrf emission file</td>
</tr><tr class="even"><td>wrf_profile</td>
<td>returns a traffic intensity profile (based on wrf file Times)</td>
</tr><tr class="odd"><td>wrf_put</td>
<td>Function to write variables in WRF-Chem inputs</td>
</tr><tr class="even"><td>to_brams_spm</td>
<td>Produce inputs for BRAMS SPM [@freitas2005simple]</td>
</tr><tr class="odd"><td>to_rline</td>
<td>Produce inputs for R-Line [@snyder2013rline]</td>
</tr><tr class="even"><td>to_wrf</td>
<td>Distribution of emissions for WRF-Chem [@Grelletal2005]</td>
</tr><tr class="odd"><td>to_as4wrf</td>
<td>Produce data-frame to be used with NCL AS4WRF [@vara2016]</td>
</tr></tbody></table></div>
<div class="section level2">
<h2 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a></h2>
<p>The following example creates a directory <strong>EMISS</strong> and then create a wrfchem input in that file. The package already counts with wrfinput files required to run eixport and create inputs for WRF-Chem. The line <code>data(Lights)</code> load a matrix of night light to spatially distribute the emissions. The perfil argument is used to temporally distribute the emissions. Lastly, the function <code>to_wrf</code> in one line reads the 1521983 <span class="math inline"><em>t</em> ⋅ <em>y</em><sup>−1</sup></span> of CO, spatially distribute it using nighttime traffic matrix Lights, temporally distribute it with the perfil, injecting the array of emissions directly into the wrfchemi file. The colour palette is “mpl_inferno” from the R package cptcity [@cpt].</p>
<pre><code><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://atmoschem.github.io/eixport/" class="external-link">eixport</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"EMISS"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/wrf_create.html">wrf_create</a></span><span class="op">(</span>wrfinput_dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, package <span class="op">=</span> <span class="st">"eixport"</span><span class="op">)</span>,</span>
<span>          wrfchemi_dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"EMISS"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># get the name of created file</span></span>
<span><span class="va">files</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span>path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"EMISS"</span><span class="op">)</span>,</span>
<span>                   pattern <span class="op">=</span> <span class="st">"wrfchemi"</span>,</span>
<span>                   full.names <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># load end write some data in this emission file</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">Lights</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/to_wrf.html">to_wrf</a></span><span class="op">(</span><span class="va">Lights</span>, <span class="va">files</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, total <span class="op">=</span> <span class="fl">1521983</span>, names <span class="op">=</span> <span class="st">"E_CO"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/wrf_plot.html">wrf_plot</a></span><span class="op">(</span><span class="va">files</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, <span class="st">"E_CO"</span><span class="op">)</span></span>
<span><span class="co"># [1] "EMISS/wrfchemi_d01_2011-08-01_00:00:00"</span></span>
<span><span class="co"># [1] "E_CO"</span></span>
<span><span class="co"># [1] "Max value: 26.6966304779053, Min value: 0"</span></span></code></pre>
<p>The resulting plot can be seen in the Fig. 1.</p>
<div class="float">
<img src="https://i.imgur.com/BcZ2tfW.png" alt="WRF-Chem emisisons of CO (t/y)"><div class="figcaption">WRF-Chem emisisons of CO (t/y)</div>
</div>
<p>The R package eixport is available at the repository <a href="https://github.com/atmoschem/eixport" class="external-link uri">https://github.com/atmoschem/eixport</a>. To ensure the usability of the package, in any commit to GitHub, eixport is installed in Ubuntu via Travis-CI (<a href="https://travis-ci.org/atmoschem/eixport" class="external-link uri">https://travis-ci.org/atmoschem/eixport</a>) and Windows via Appveyor (<a href="https://ci.appveyor.com/project/Schuch666/eixport" class="external-link uri">https://ci.appveyor.com/project/Schuch666/eixport</a>). Also, eixport is already on CRAN <a href="https://CRAN.R-project.org/package=eixport" class="external-link uri">https://CRAN.R-project.org/package=eixport</a>. Moreover, this packages tests functions with the suite CodeCov (<a href="https://codecov.io/" class="external-link uri">https://codecov.io/</a>) and the r package covr [@covr], achieving 89% of coverage (<a href="https://codecov.io/github/atmoschem/eixport" class="external-link uri">https://codecov.io/github/atmoschem/eixport</a>).</p>
</div>
</div>
<div class="section level1">
<h1 id="acknowledgements">Acknowledgements<a class="anchor" aria-label="anchor" href="#acknowledgements"></a></h1>
<p>The development of eixport was supported by postdoc grans fro the Fundação de Universidade de São Paulo and Fundação Coordenação de Aperfeiçoamento de Pessoal de Nível Superior.</p>
</div>
<div class="section level1">
<h1 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h1>
</div>


  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>

</div>



      <footer><div class="copyright">
  <p></p><p>Developed by <a href="http://www.ibarraespinosa.github.io" class="external-link">Sergio Ibarra-Espinosa</a>, Daniel Schuch.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

