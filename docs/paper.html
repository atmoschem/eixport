<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Summary • eixport</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script>




<meta property="og:title" content="Summary" />
<meta property="og:image" content="/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-2642843-6"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-2642843-6');
</script>


  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-title-body">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">eixport</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.5.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="articles/gallery0.html">WRF out statistics</a>
    </li>
    <li>
      <a href="articles/gallery1.html">plot WRF: Elevation</a>
    </li>
    <li>
      <a href="articles/gallery2.html">plot WRF: Temperature</a>
    </li>
    <li>
      <a href="articles/gallery3.html">plot WRF: Cross sections</a>
    </li>
    <li>
      <a href="articles/gallery5.html">plot WRF: Domains</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/atmoschem/eixport/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="contents col-md-9">
    <div class="page-header">
      <h1>Summary</h1>
    </div>


<hr>
<p>title: ‘eixport: An R package to export emissions to atmospheric models’ tags:</p>
<ul>
<li>eixport</li>
<li>emissions</li>
<li>R</li>
<li>air quality model authors:</li>
<li>affiliation: ‘1’ name: Sergio Ibarra-Espinosa orcid: 0000-0002-3162-1905</li>
<li>affiliation: ‘1’ name: Daniel Schuch orcid: 0000-0001-5977-4519</li>
<li>affiliation: ‘1’ name: Edmilson Dias de Freitas orcid: 0000-0001-8783-2747 date: “23 February 2018” output: pdf_document: default bibliography: paper.bib affiliations:</li>
<li>index: 1 name: Departamento de Ciências Atmosféricas, Universidade de São Paulo, Brasil —</li>
</ul>
<div id="summary" class="section level1">

<p>Emissions are the pollutant mass released into the atmosphere [@pulles2010art]. The origin of the emissions can be human-made or anthropogenic or biogenic. The consequences of this pollution are complex affecting the atmosphere, human health, ecosystems, and infrastructure [@SeinfeldPandis2016]. In fact, pollution caused 9 million premature deaths in 2015, 16% of all deaths worldwide [@landrigan2017lancet].</p>
<p>An important tool for policy decision is air quality models. They have been used not only to study the impact of different emissions scenarios for policy making but also to understand the dynamics of air pollutants in various parts of the world [@Andradeetal2015]. The inputs for an air quality models are meteorology and emissions. Currently, there are tools for developing emissions inventories such as the VEIN [@vein] and the EmissV models [@emissv]. However, the existing tools for inputting the emissions into the air quality models are not written in a user-friendly way, such as PREP-Chem written in Fortran and C [@freitas2011prep]. Also, as the R language has a growing community, including statistical R packages for model evaluation and validation, such as openair [], air quality modelers already familiar with R would tend to use ‘eixport’ for inputing data into the appropiate format for each model without the need of deep knowledge in a specific model language. Therefore, we developed <strong>eixport</strong>, a tool for inputting data into atmospheric models using R [@R].</p>
<p>eixport imports functions form the R packages sf [@sf] which provides functions for spatial vector data, providing bindings to the GDAL, GEOS, and Proj.4 C++ libraries. Also, eixport import functions from the package ncdf4 [@ncdf4], which interface to Unidata netCDF Format Data Files, and from the raster package [@raster], which provides functions to gridded data.</p>
<div id="functions-and-data" class="section level2">
<h2 class="hasAnchor">
<a href="#functions-and-data" class="anchor"></a>Functions and data</h2>
<p>eixport count with the following functions:</p>
<table>
<thead><tr class="header">
<th>Function</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>emisco</td>
<td>Dataset of Emissions from VEIN demo</td>
</tr>
<tr class="even">
<td>emis_opt</td>
<td>List of WRF emission species</td>
</tr>
<tr class="odd">
<td>rawprofile</td>
<td>A matrix to temporally distribute emissions</td>
</tr>
<tr class="even">
<td>wrf_create</td>
<td>Create WRF-Chem inputs based on a WRFinput file</td>
</tr>
<tr class="odd">
<td>wrf_get</td>
<td>Reads variables from WRF-Chem inputs</td>
</tr>
<tr class="even">
<td>wrf_grid</td>
<td>Creates spatial feature (sf) polygon grid from WRFinput file</td>
</tr>
<tr class="odd">
<td>wrf_plot</td>
<td>Simple plot from wrf emission file</td>
</tr>
<tr class="even">
<td>wrf_profile</td>
<td>returns a traffic intensity profile (based on wrf file Times)</td>
</tr>
<tr class="odd">
<td>wrf_put</td>
<td>Function to write variables in WRF-Chem inputs</td>
</tr>
<tr class="even">
<td>to_brams_spm</td>
<td>Produce inputs for BRAMS SPM [@freitas2005simple]</td>
</tr>
<tr class="odd">
<td>to_rline</td>
<td>Produce inputs for R-Line [@snyder2013rline]</td>
</tr>
<tr class="even">
<td>to_wrf</td>
<td>Distribution of emissions for WRF-Chem [@Grelletal2005]</td>
</tr>
<tr class="odd">
<td>to_as4wrf</td>
<td>Produce data-frame to be used with NCL AS4WRF [@vara2016]</td>
</tr>
</tbody>
</table>
</div>
<div id="examples" class="section level2">
<h2 class="hasAnchor">
<a href="#examples" class="anchor"></a>Examples</h2>
<p>The following example creates a directory <strong>EMISS</strong> and then create a wrfchem input in that file. The package already counts with wrfinput files required to run eixport and create inputs for WRF-Chem. The line <code><a href="https://rdrr.io/r/utils/data.html">data(Lights)</a></code> load a matrix of night light to spatially distribute the emissions. The perfil argument is used to temporally distribute the emissions. Lastly, the function <code>to_wrf</code> in one line reads the 1521983 <span class="math inline"><em>t</em> ⋅ <em>y</em><sup> − 1</sup></span> of CO, spatially distribute it using nighttime traffic matrix Lights, temporally distribute it with the perfil, injecting the array of emissions directly into the wrfchemi file. The colour palette is “mpl_inferno” from the R package cptcity [@cpt].</p>
<pre><code><a href="https://atmoschem.github.io/eixport/">library(eixport)
dir.create(file.path(tempdir(), "EMISS"))
wrf_create(wrfinput_dir = system.file("extdata", package = "eixport"),
          wrfchemi_dir = file.path(tempdir(), "EMISS"))

# get the name of created file
files &lt;- list.files(path = file.path(tempdir(), "EMISS"),
                   pattern = "wrfchemi",
                   full.names = TRUE)

# load end write some data in this emission file
data(Lights)
to_wrf(Lights, files[1], total = 1521983, names = "E_CO")

wrf_plot(files[1], "E_CO")
# [1] "EMISS/wrfchemi_d01_2011-08-01_00:00:00"
# [1] "E_CO"
# [1] "Max value: 26.6966304779053, Min value: 0"</a></code></pre>
<p>The resulting plot can be seen in the Fig. 1.</p>
<p><img src="https://i.imgur.com/BcZ2tfW.png" alt="WRF-Chem emisisons of CO (t/y)"></p>
<p>The R package eixport is available at the repository <a href="https://github.com/atmoschem/eixport" class="uri">https://github.com/atmoschem/eixport</a>. To ensure the usability of the package, in any commit to GitHub, eixport is installed in Ubuntu via Travis-CI (<a href="https://travis-ci.org/atmoschem/eixport" class="uri">https://travis-ci.org/atmoschem/eixport</a>) and Windows via Appveyor (<a href="https://ci.appveyor.com/project/Schuch666/eixport" class="uri">https://ci.appveyor.com/project/Schuch666/eixport</a>). Also, eixport is already on CRAN <a href="https://CRAN.R-project.org/package=eixport" class="uri">https://CRAN.R-project.org/package=eixport</a>. Moreover, this packages tests functions with the suite CodeCov (<a href="https://codecov.io/" class="uri">https://codecov.io/</a>) and the r package covr [@covr], achieving 89% of coverage (<a href="https://codecov.io/github/atmoschem/eixport" class="uri">https://codecov.io/github/atmoschem/eixport</a>).</p>
<p>\pagebreak</p>
</div>
</div>
<div id="acknowledgements" class="section level1">
<h1 class="hasAnchor">
<a href="#acknowledgements" class="anchor"></a>Acknowledgements</h1>
<p>The development of eixport was supported by postdoc grans fro the Fundação de Universidade de São Paulo and Fundação Coordenação de Aperfeiçoamento de Pessoal de Nível Superior.</p>
</div>
<div id="references" class="section level1">
<h1 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h1>
</div>


  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>

</div>



      <footer>
      <div class="copyright">
  <p>Developed by <a href='http://www.ibarraespinosa.github.io'>Sergio Ibarra-Espinosa</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


